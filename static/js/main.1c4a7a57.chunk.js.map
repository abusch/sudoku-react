{"version":3,"sources":["selectionSlice.js","sudokuSlice.js","App.js","store.js","index.js"],"names":["selectionSlice","createSlice","name","initialState","row","column","reducers","moveRight","state","moveLeft","moveUp","moveDown","actions","sudokuSlice","map","digit","value","locked","pencilMarks","Set","setDigit","action","payload","cell","setPencilMark","has","delete","add","Cell","props","displayValue","classes","selection","Array","from","sort","join","push","className","Block","useSelector","data","sudoku","blockX","x","blockY","y","cells","selectedBlockX","Math","floor","selectedBlockY","j","i","key","Board","renderBlock","cellData","App","dispatch","useDispatch","digitKeyToDigit","code","useEffect","handleKeyDown","event","shiftKey","window","addEventListener","removeEventListener","configureStore","reducer","selectionReducer","sudokuReducer","enableMapSet","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.1c4a7a57.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nexport const selectionSlice = createSlice({\n  name: 'selection',\n  initialState: {\n    row: 0,\n    column: 0,\n  },\n  reducers: {\n    moveRight: state => {\n      state.column = (state.column === 8) ? 0 : (state.column + 1);\n    },\n    moveLeft: state => {\n      state.column = (state.column === 0) ? 8 : (state.column - 1);\n    },\n    moveUp: state => {\n      state.row = (state.row === 0) ? 8 : (state.row - 1);\n    },\n    moveDown: state => {\n      state.row = (state.row === 8) ? 0 : (state.row + 1);\n    },\n  }\n});\n\nexport const { moveRight, moveLeft, moveUp, moveDown } = selectionSlice.actions;\n\nexport default selectionSlice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst initialData = [\n  0, 0, 1, 2, 0, 3, 4, 0, 0,\n  0, 0, 0, 6, 0, 7, 0, 0, 0,\n  5, 0, 0, 0, 0, 0, 0, 0, 3,\n  3, 7, 0, 0, 0, 0, 0, 8, 1,\n  0, 0, 0, 0, 0, 0, 0, 0, 0,\n  6, 2, 0, 0, 0, 0, 0, 3, 7,\n  1, 0, 0, 0, 0, 0, 0, 0, 8,\n  0, 0, 0, 8, 0, 5, 0, 0, 0,\n  0, 0, 6, 4, 0, 2, 5, 0, 0];\n\nconst digitToCell = (digit) => ({\n  value: digit,\n  locked: (digit !== 0),\n  pencilMarks: new Set(),\n});\n\nexport const sudokuSlice = createSlice({\n  name: 'sudoku',\n  initialState: initialData.map(digitToCell),\n  reducers: {\n    setDigit: (state, action) => {\n      const { row, column, digit } = action.payload;\n      const cell = state[row * 9 + column];\n      if (!cell.locked) {\n        cell.value = digit;\n      }\n    },\n    setPencilMark: (state, action) => {\n      const { row, column, digit } = action.payload;\n      const cell = state[row * 9 + column];\n      if (!cell.locked) {\n        if (cell.pencilMarks.has( digit )) {\n          cell.pencilMarks.delete( digit );\n        } else {\n          cell.pencilMarks.add( digit );\n        } \n      }\n    }\n  }\n});\n\nexport const {setDigit, setPencilMark} = sudokuSlice.actions;\nexport default sudokuSlice.reducer;\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { moveRight, moveLeft, moveUp, moveDown } from './selectionSlice';\nimport { setDigit, setPencilMark } from './sudokuSlice';\nimport './App.css';\n\nexport const Cell = (props) => {\n  const classes = [\"cell\", props.selection];\n  const pencilMarks = Array.from(props.value.pencilMarks).sort().join(' ');\n\n  if (props.value.locked) {\n    classes.push(\"locked\");\n  }\n\n  let displayValue;\n  if (props.value.value === 0) {\n    displayValue = pencilMarks;\n    classes.push(\"pencilMark\");\n  } else {\n    displayValue = props.value.value;\n  }\n\n  return <div className={classes.join(' ')}>\n    {displayValue}\n  </div>;\n}\n\nconst Block = (props) => {\n  const selection = useSelector(state => state.selection);\n  const data = useSelector(state => state.sudoku);\n\n  const blockX = props.x;\n  const blockY = props.y;\n\n  const cells = [];\n  const { row, column } = selection;\n  const selectedBlockX = Math.floor(column / 3);\n  const selectedBlockY = Math.floor(row / 3);\n\n  for (let j = 0; j < 3; j++) {\n    const y = blockY * 3 + j;\n    for (let i = 0; i < 3; i++) {\n      const x = blockX * 3 + i;\n      let selection;\n      if (x === column && y === row) {\n        selection = \"selectedCell\";\n      } else if (x === column) {\n        selection = \"selectedColumn\";\n      } else if (y === row) {\n        selection = \"selectedRow\";\n      } else if (blockX === selectedBlockX && blockY === selectedBlockY) {\n        selection = \"selectedBlock\";\n      } else {\n        selection = \"\";\n      }\n      // Generate an appropriate key to make sure a cell is only rerendered when needed:\n      const key = x + \",\" + y + \",\" + selection;\n      cells.push(<Cell key={key} value={data[y * 9 + x]} selection={selection} />);\n    }\n  }\n\n  return <div className=\"block\">\n    {cells}\n  </div>\n}\n\nexport const Board = (props) => {\n  const renderBlock = (blockX, blockY) => {\n    return <Block x={blockX} y={blockY} cellData={props.cellData} selection={props.selection} />;\n  };\n\n  return <div className=\"board\">\n    {renderBlock(0, 0)}\n    {renderBlock(1, 0)}\n    {renderBlock(2, 0)}\n    {renderBlock(0, 1)}\n    {renderBlock(1, 1)}\n    {renderBlock(2, 1)}\n    {renderBlock(0, 2)}\n    {renderBlock(1, 2)}\n    {renderBlock(2, 2)}\n  </div>;\n}\n\nconst App = () => {\n  const selection = useSelector(state => state.selection);\n  const dispatch = useDispatch();\n\n  const digitKeyToDigit = (code) => {\n    switch (code) {\n      case \"Digit1\": return 1;\n      case \"Digit2\": return 2;\n      case \"Digit3\": return 3;\n      case \"Digit4\": return 4;\n      case \"Digit5\": return 5;\n      case \"Digit6\": return 6;\n      case \"Digit7\": return 7;\n      case \"Digit8\": return 8;\n      case \"Digit9\": return 9;\n      default: return undefined;\n    }\n  }\n\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      let x = selection.column;\n      let y = selection.row;\n\n      if (event.key === 'j' || event.key === 'ArrowDown') {\n        dispatch(moveDown());\n      } else if (event.key === 'k' || event.key === 'ArrowUp') {\n        dispatch(moveUp());\n      } else if (event.key === 'h' || event.key === 'ArrowLeft') {\n        dispatch(moveLeft());\n      } else if (event.key === 'l' || event.key === 'ArrowRight') {\n        dispatch(moveRight());\n      } else if (digitKeyToDigit(event.code)) {\n        const payload = {\n          column: x,\n          row: y,\n          digit: digitKeyToDigit(event.code),\n        };\n        if (event.shiftKey) {\n          dispatch(setPencilMark(payload));\n        } else {\n          dispatch(setDigit(payload));\n        }\n      } else if (event.key === 'Backspace') {\n        const payload = {\n          column: x,\n          row: y,\n          digit: 0,\n        };\n        dispatch(setDigit(payload));\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [dispatch, selection]);\n\n\n  return (\n    <div className=\"content\">\n      <h1>SUDOKU</h1>\n      <Board />\n      <footer>&copy; Copyright 2021, Antoine Busch</footer>\n    </div>\n  );\n}\n\nexport default App;\n","import { configureStore } from '@reduxjs/toolkit';\nimport selectionReducer from './selectionSlice';\nimport sudokuReducer from './sudokuSlice';\n\nexport default configureStore({\n  reducer: {\n    selection: selectionReducer,\n    sudoku: sudokuReducer,\n  }\n})\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from './store';\nimport { Provider } from 'react-redux';\nimport {enableMapSet} from \"immer\"\n\n// Enable Map and Set support for immer\nenableMapSet()\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}