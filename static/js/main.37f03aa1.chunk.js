(this["webpackJsonpsudoku-react"]=this["webpackJsonpsudoku-react"]||[]).push([[0],{19:function(e,r,n){},29:function(e,r,n){},30:function(e,r,n){"use strict";n.r(r);var t=n(0),c=n.n(t),o=n(5),i=n.n(o),a=(n(19),n(2)),u=n(3),l=Object(u.b)({name:"selection",initialState:{row:0,column:0},reducers:{moveRight:function(e){e.column=8===e.column?0:e.column+1},moveLeft:function(e){e.column=0===e.column?8:e.column-1},moveUp:function(e){e.row=0===e.row?8:e.row-1},moveDown:function(e){e.row=8===e.row?0:e.row+1}}}),s=l.actions,f=s.moveRight,d=s.moveLeft,v=s.moveUp,h=s.moveDown,j=l.reducer,k=n(8),b=n(14);function p(){for(var e=function(){var e=Array(81);if(e.fill(0),m(e))return e;return[]}(),r=0;r<=50;){var n=Math.floor(Math.random()*e.length);if(0!==e[n]){var t=e[n];e[n]=0,1===O(Object(k.a)(e))?r+=1:e[n]=t}}return e}function m(e){var r=M(e);if(-1===r)return!0;var n,t=function(){for(var e=[1,2,3,4,5,6,7,8,9],r=0;r<9;r++){var n=r+Math.floor(Math.random()*(9-r)),t=e[r];e[r]=e[n],e[n]=t}return e}(),c=Object(b.a)(t);try{for(c.s();!(n=c.n()).done;){var o=n.value;if(w(e,r,o)){if(e[r]=o,m(e))return!0;e[r]=0}}}catch(i){c.e(i)}finally{c.f()}return!1}function O(e){var r=M(e);if(-1===r)return 1;for(var n=0,t=1;t<=9;t++)w(e,r,t)&&(e[r]=t,n+=O(e),e[r]=0);return n}function w(e,r,n){for(var t=Math.floor(r/9),c=r%9,o=3*Math.floor(t/3),i=3*Math.floor(c/3),a=0;a<9;a++){var u=Math.floor(a/3),l=a%3;if(e[9*t+a]===n||e[9*a+c]===n||e[9*(o+u)+(i+l)]===n)return!1}return!0}function M(e){for(var r=0;r<81;r++)if(0===e[r])return r;return-1}var x=n(7),y=n.n(x),g=function(e){return{value:e,locked:0!==e,valid:!0,pencilMarks:[]}},D=[0,0,1,2,0,3,4,0,0,0,0,0,6,0,7,0,0,0,5,0,0,0,0,0,0,0,3,3,7,0,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,6,2,0,0,0,0,0,3,7,1,0,0,0,0,0,0,0,8,0,0,0,8,0,5,0,0,0,0,0,6,4,0,2,5,0,0].map(g),C=Object(u.b)({name:"sudoku",initialState:D,reducers:{setDigit:function(e,r){var n=r.payload,t=n.row,c=n.column,o=n.digit,i=e[9*t+c];i.locked||(i.value=o,i.pencilMarks=[],function(e,r,n,t){for(var c=9*r+n,o=3*Math.floor(r/3),i=3*Math.floor(n/3),a=0;a<9;a++){var u=9*r+a,l=9*a+n,s=9*(o+Math.floor(a/3))+(i+a%3),f=e[u],d=e[l],v=e[s];if(u!==c){var h=f.pencilMarks.indexOf(t);-1!==h&&f.pencilMarks.splice(h,1)}if(l!==c){var j=d.pencilMarks.indexOf(t);-1!==j&&d.pencilMarks.splice(j,1)}if(s!==c){var k=v.pencilMarks.indexOf(t);-1!==k&&v.pencilMarks.splice(k,1)}}}(e,t,c,o))},setPencilMark:function(e,r){var n=r.payload,t=n.row,c=n.column,o=n.digit,i=e[9*t+c];if(!i.locked){var a=i.pencilMarks.indexOf(o);-1!==a?i.pencilMarks.splice(a,1):(i.pencilMarks.push(o),i.value=0)}},verify:function(e){e.forEach((function(r,n){var t=Math.floor(n/9),c=n%9;r.locked||(r.valid=function(e,r,n,t){if(0===t)return!0;for(var c=9*r+n,o=3*Math.floor(r/3),i=3*Math.floor(n/3),a=0;a<9;a++){var u=9*r+a,l=9*a+n,s=9*(o+Math.floor(a/3))+(i+a%3),f=e[u].value,d=e[l].value,v=e[s].value;if(u!==c&&f===t||l!==c&&d===t||s!==c&&v===t)return!1}return!0}(e,t,c,r.value))}))},restart:function(e){e.forEach((function(e){e.locked||(e.value=0,e.pencilMarks=[],e.valid=!0)}))},generateNew:function(e){var r=p();e.splice.apply(e,[0,81].concat(Object(k.a)(r.map(g))))}}}),N=C.actions,A=N.setDigit,E=N.setPencilMark,U=N.verify,L=N.restart,R=N.generateNew,B=y()(C.reducer),S=n(1),J=function(e){var r,n=["cell",e.selectedClass],t=e.value.pencilMarks.slice().sort().join(" ");return e.value.locked&&n.push("locked"),e.value.valid||n.push("invalid"),0===e.value.value?(r=t,n.push("pencilMark")):r=e.value.value,Object(S.jsx)("div",{className:n.join(" "),children:r})},K=function(e){return e.selection},P=function(e){return e.sudoku.present},I=function(e){for(var r=Object(a.c)(K),n=Object(a.c)(P),t=e.x,c=e.y,o=[],i=r.row,u=r.column,l=Math.floor(u/3),s=Math.floor(i/3),f=0;f<3;f++)for(var d=3*c+f,v=0;v<3;v++){var h=3*t+v,j=void 0,k=h+","+d+","+(j=h===u&&d===i?"selectedCell":h===u?"selectedColumn":d===i?"selectedRow":t===l&&c===s?"selectedBlock":"");o.push(Object(S.jsx)(J,{value:n[9*d+h],selectedClass:j},k))}return Object(S.jsx)("div",{className:"block",children:o})},T=function(){var e=function(e,r){return Object(S.jsx)(I,{x:e,y:r})};return Object(S.jsxs)("div",{className:"board",children:[e(0,0),e(1,0),e(2,0),e(0,1),e(1,1),e(2,1),e(0,2),e(1,2),e(2,2)]})},V=function(e){return e.sudoku},q=function(){var e=Object(a.c)(V),r=Object(a.b)();return Object(S.jsxs)("div",{className:"controls",children:[Object(S.jsx)("button",{id:"verify",onClick:function(){return r(U())},children:"Verify"}),Object(S.jsx)("button",{id:"restart",onClick:function(){return r(L())},children:"Restart"}),Object(S.jsx)("button",{id:"new",onClick:function(){return r(R())},children:"New"}),Object(S.jsx)("button",{id:"undo",onClick:function(){return r(x.ActionCreators.undo())},disabled:0===e.past.length,children:"Undo"})]})},z=(n(29),function(e){return e.selection}),F=function(){var e=Object(a.c)(z),r=Object(a.b)();return Object(t.useEffect)((function(){var n=function(n){var t=e.column,c=e.row;if("j"===n.key||"ArrowDown"===n.key)r(h());else if("k"===n.key||"ArrowUp"===n.key)r(v());else if("h"===n.key||"ArrowLeft"===n.key)r(d());else if("l"===n.key||"ArrowRight"===n.key)r(f());else if("Backspace"===n.key){r(A({column:t,row:c,digit:0}))}else{var o=function(e){switch(e){case"Digit1":return 1;case"Digit2":return 2;case"Digit3":return 3;case"Digit4":return 4;case"Digit5":return 5;case"Digit6":return 6;case"Digit7":return 7;case"Digit8":return 8;case"Digit9":return 9;default:return}}(n.code);if(o){var i={column:t,row:c,digit:o};n.shiftKey?r(E(i)):r(A(i))}}};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[r,e]),Object(S.jsxs)("div",{className:"content",children:[Object(S.jsx)("h1",{children:"SUDOKU"}),Object(S.jsx)(T,{}),Object(S.jsx)(q,{}),Object(S.jsxs)("footer",{children:[Object(S.jsx)("div",{children:"\xa9 Copyright 2021, Antoine Busch"}),Object(S.jsxs)("div",{children:["Colours by ",Object(S.jsx)("a",{href:"https://www.nordtheme.com/",children:"Nord Theme"})]})]})]})},G=Object(u.a)({reducer:{selection:j,sudoku:B}});i.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(a.a,{store:G,children:Object(S.jsx)(F,{})})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.37f03aa1.chunk.js.map